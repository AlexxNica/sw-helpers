{"version":3,"sources":["index.js"],"names":["atLeastOne","object","parameters","Object","keys","some","parameter","Error","map","p","join","hasMethod","expectedMethod","pop","type","isInstance","expectedClass","name","isOneOf","values","includes","isType","expectedType","actualType","isSWEnv","self","ServiceWorkerGlobalScope","isValue","expectedValue","actualValue","assert","defaultCacheName","registration","scope","behaviorCallbacks","asyncGenerator","AwaitValue","value","AsyncGenerator","gen","resume","key","arg","result","Promise","resolve","then","settle","done","err","front","reject","next","back","_invoke","request","return","Symbol","asyncIterator","prototype","throw","wrap","fn","apply","arguments","await","asyncToGenerator","step","info","error","get","property","receiver","Function","desc","getOwnPropertyDescriptor","parent","getPrototypeOf","getter","call","set","writable","setter","RequestWrapper","constructor","cacheName","behaviors","fetchOptions","matchOptions","callbacks","Array","forEach","behavior","callbackName","push","bind","getCache","_this","_cache","caches","open","match","_this2","cache","fetch","_this3","catch","fetchDidFail","callback","fetchAndCache","_this4","response","cacheable","ok","cacheWillUpdate","reduce","previous","cb","newResponse","clone","_ref","oldResponse","cacheDidUpdate","put","_x","Handler","requestWrapper","handle","event","params","CacheFirst","FetchEvent","cachedResponse","CacheOnly","NetworkFirst","NetworkOnly","StaleWhileRevalidate","fetchAndCacheResponse","Response"],"mappings":"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","file":"sw-runtime-caching.min.mjs","sourcesContent":["/*\n Copyright 2016 Google Inc. All Rights Reserved.\n Licensed under the Apache License, Version 2.0 (the \"License\");\n you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n\n     http://www.apache.org/licenses/LICENSE-2.0\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an \"AS IS\" BASIS,\n WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n See the License for the specific language governing permissions and\n limitations under the License.\n*/\n\nfunction atLeastOne(object) {\n  const parameters = Object.keys(object);\n  if (!parameters.some(parameter => object[parameter] !== undefined)) {\n    throw Error('Please set at least one of the following parameters: ' + parameters.map(p => `'${ p }'`).join(', '));\n  }\n}\n\nfunction hasMethod(object, expectedMethod) {\n  const parameter = Object.keys(object).pop();\n  const type = typeof object[parameter][expectedMethod];\n  if (type !== 'function') {\n    throw Error(`The '${ parameter }' parameter must be an object that exposes ` + `a '${ expectedMethod }' method.`);\n  }\n}\n\nfunction isInstance(object, expectedClass) {\n  const parameter = Object.keys(object).pop();\n  if (!(object[parameter] instanceof expectedClass)) {\n    throw Error(`The '${ parameter }' parameter must be an instance of ` + `'${ expectedClass.name }'`);\n  }\n}\n\nfunction isOneOf(object, values) {\n  const parameter = Object.keys(object).pop();\n  if (!values.includes(object[parameter])) {\n    throw Error(`The '${ parameter }' parameter must be set to one of the ` + `following: ${ values }`);\n  }\n}\n\nfunction isType(object, expectedType) {\n  const parameter = Object.keys(object).pop();\n  const actualType = typeof object[parameter];\n  if (actualType !== expectedType) {\n    throw Error(`The '${ parameter }' parameter has the wrong type. ` + `(Expected: ${ expectedType }, actual: ${ actualType })`);\n  }\n}\n\nfunction isSWEnv() {\n  return 'ServiceWorkerGlobalScope' in self && self instanceof ServiceWorkerGlobalScope;\n}\n\nfunction isValue(object, expectedValue) {\n  const parameter = Object.keys(object).pop();\n  const actualValue = object[parameter];\n  if (actualValue !== expectedValue) {\n    throw Error(`The '${ parameter }' parameter has the wrong value. ` + `(Expected: ${ expectedValue }, actual: ${ actualValue })`);\n  }\n}\n\nvar assert = {\n  atLeastOne,\n  hasMethod,\n  isInstance,\n  isOneOf,\n  isType,\n  isSWEnv,\n  isValue\n};\n\n/*\n Copyright 2016 Google Inc. All Rights Reserved.\n Licensed under the Apache License, Version 2.0 (the \"License\");\n you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n\n     http://www.apache.org/licenses/LICENSE-2.0\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an \"AS IS\" BASIS,\n WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n See the License for the specific language governing permissions and\n limitations under the License.\n*/\n\n/**\n * The default cache name, used by RequestWrapper when there's no name provided.\n * It combines a constant prefix with the `registration.scope` value associated\n * with the current service worker, ensuring that multiple service workers used\n * on the same origin will have different default caches.\n *\n * @type {string}\n * @memberof module:sw-runtime-caching\n */\nconst defaultCacheName = `sw-runtime-caching-${ self.registration.scope }`;\n\n/**\n * A list of the callback methdo names that the RequestWrapper might trigger.\n *\n * @private\n * @type {Array.<string>}\n * @memberof module:sw-runtime-caching\n */\nconst behaviorCallbacks = ['cacheDidUpdate', 'cacheWillUpdate', 'fetchDidFail', 'requestWillFetch'];\n\nvar asyncGenerator = function () {\n  function AwaitValue(value) {\n    this.value = value;\n  }\n\n  function AsyncGenerator(gen) {\n    var front, back;\n\n    function send(key, arg) {\n      return new Promise(function (resolve, reject) {\n        var request = {\n          key: key,\n          arg: arg,\n          resolve: resolve,\n          reject: reject,\n          next: null\n        };\n\n        if (back) {\n          back = back.next = request;\n        } else {\n          front = back = request;\n          resume(key, arg);\n        }\n      });\n    }\n\n    function resume(key, arg) {\n      try {\n        var result = gen[key](arg);\n        var value = result.value;\n\n        if (value instanceof AwaitValue) {\n          Promise.resolve(value.value).then(function (arg) {\n            resume(\"next\", arg);\n          }, function (arg) {\n            resume(\"throw\", arg);\n          });\n        } else {\n          settle(result.done ? \"return\" : \"normal\", result.value);\n        }\n      } catch (err) {\n        settle(\"throw\", err);\n      }\n    }\n\n    function settle(type, value) {\n      switch (type) {\n        case \"return\":\n          front.resolve({\n            value: value,\n            done: true\n          });\n          break;\n\n        case \"throw\":\n          front.reject(value);\n          break;\n\n        default:\n          front.resolve({\n            value: value,\n            done: false\n          });\n          break;\n      }\n\n      front = front.next;\n\n      if (front) {\n        resume(front.key, front.arg);\n      } else {\n        back = null;\n      }\n    }\n\n    this._invoke = send;\n\n    if (typeof gen.return !== \"function\") {\n      this.return = undefined;\n    }\n  }\n\n  if (typeof Symbol === \"function\" && Symbol.asyncIterator) {\n    AsyncGenerator.prototype[Symbol.asyncIterator] = function () {\n      return this;\n    };\n  }\n\n  AsyncGenerator.prototype.next = function (arg) {\n    return this._invoke(\"next\", arg);\n  };\n\n  AsyncGenerator.prototype.throw = function (arg) {\n    return this._invoke(\"throw\", arg);\n  };\n\n  AsyncGenerator.prototype.return = function (arg) {\n    return this._invoke(\"return\", arg);\n  };\n\n  return {\n    wrap: function (fn) {\n      return function () {\n        return new AsyncGenerator(fn.apply(this, arguments));\n      };\n    },\n    await: function (value) {\n      return new AwaitValue(value);\n    }\n  };\n}();\n\n\n\nvar asyncToGenerator = function (fn) {\n  return function () {\n    var gen = fn.apply(this, arguments);\n    return new Promise(function (resolve, reject) {\n      function step(key, arg) {\n        try {\n          var info = gen[key](arg);\n          var value = info.value;\n        } catch (error) {\n          reject(error);\n          return;\n        }\n\n        if (info.done) {\n          resolve(value);\n        } else {\n          return Promise.resolve(value).then(function (value) {\n            step(\"next\", value);\n          }, function (err) {\n            step(\"throw\", err);\n          });\n        }\n      }\n\n      return step(\"next\");\n    });\n  };\n};\n\n\n\n\n\n\n\n\n\n\n\nvar get = function get(object, property, receiver) {\n  if (object === null) object = Function.prototype;\n  var desc = Object.getOwnPropertyDescriptor(object, property);\n\n  if (desc === undefined) {\n    var parent = Object.getPrototypeOf(object);\n\n    if (parent === null) {\n      return undefined;\n    } else {\n      return get(parent, property, receiver);\n    }\n  } else if (\"value\" in desc) {\n    return desc.value;\n  } else {\n    var getter = desc.get;\n\n    if (getter === undefined) {\n      return undefined;\n    }\n\n    return getter.call(receiver);\n  }\n};\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar set = function set(object, property, value, receiver) {\n  var desc = Object.getOwnPropertyDescriptor(object, property);\n\n  if (desc === undefined) {\n    var parent = Object.getPrototypeOf(object);\n\n    if (parent !== null) {\n      set(parent, property, value, receiver);\n    }\n  } else if (\"value\" in desc && desc.writable) {\n    desc.value = value;\n  } else {\n    var setter = desc.set;\n\n    if (setter !== undefined) {\n      setter.call(receiver, value);\n    }\n  }\n\n  return value;\n};\n\n/*\n Copyright 2016 Google Inc. All Rights Reserved.\n Licensed under the Apache License, Version 2.0 (the \"License\");\n you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n\n     http://www.apache.org/licenses/LICENSE-2.0\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an \"AS IS\" BASIS,\n WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n See the License for the specific language governing permissions and\n limitations under the License.\n*/\n\n/**\n * This class is used by the various subclasses of `Handler` to configure the\n * cache name and any desired request/cache behaviors.\n *\n * It automatically triggers any registered behaviors at the appropriate time.\n * The current set of behavior callbacks, along with the parameters they're\n * given and when they're called, is:\n *\n *   - `cacheDidUpdate({cacheName, oldResponse, newResponse})`: Called whenever\n *   a new entry is written to the cache.\n *   - `fetchDidFail({request})`: Called whenever a network request fails.\n *   - `requestWillFetch({request})`: Called prior to making a network request.\n *\n * @memberof module:sw-runtime-caching\n */\nclass RequestWrapper {\n  /**\n   * @param {string} [cacheName] The name of the cache to use for Handlers that\n   *        involve caching. If none is provided, a default name that uses the\n   *        current service worker scope will be used.\n   * @param {Array.<Object>} [behaviors] Any behaviors that should be invoked.\n   * @param {Object} [fetchOptions] Values passed along to the\n   *        [`init`](https://developer.mozilla.org/en-US/docs/Web/API/GlobalFetch/fetch#Parameters)\n   *        of all `fetch()` requests made by this wrapper.\n   * @param {Object} [matchOptions] Values passed along to the\n   *        [`options`](https://developer.mozilla.org/en-US/docs/Web/API/Cache/match#Parameters)\n   *        of all cache `match()` requests made by this wrapper.\n   */\n  constructor({ cacheName, behaviors, fetchOptions, matchOptions } = {}) {\n    if (cacheName) {\n      assert.isType({ cacheName }, 'string');\n      this.cacheName = cacheName;\n    } else {\n      this.cacheName = defaultCacheName;\n    }\n\n    if (fetchOptions) {\n      assert.isType({ fetchOptions }, 'object');\n      this.fetchOptions = fetchOptions;\n    }\n\n    if (matchOptions) {\n      assert.isType({ matchOptions }, 'object');\n      this.matchOptions = matchOptions;\n    }\n\n    this.callbacks = {};\n\n    if (behaviors) {\n      assert.isInstance({ behaviors }, Array);\n\n      behaviors.forEach(behavior => {\n        for (let callbackName of behaviorCallbacks) {\n          if (typeof behavior[callbackName] === 'function') {\n            if (!this.callbacks[callbackName]) {\n              this.callbacks[callbackName] = [];\n            }\n            this.callbacks[callbackName].push(behavior[callbackName].bind(behavior));\n          }\n        }\n      });\n    }\n  }\n\n  /**\n   * @return {Cache} The cache for this RequestWrapper.\n   */\n  getCache() {\n    var _this = this;\n\n    return asyncToGenerator(function* () {\n      if (!_this._cache) {\n        _this._cache = yield caches.open(_this.cacheName);\n      }\n      return _this._cache;\n    })();\n  }\n\n  /**\n   * Wraps `cache.match()`, using the previously configured cache name and match\n   * options.\n   *\n   * @param {Object} input\n   * @param {Request|string} input.request The key for the cache lookup.\n   * @return {Promise.<Response>} The cached response.\n   */\n  match({ request }) {\n    var _this2 = this;\n\n    return asyncToGenerator(function* () {\n      assert.atLeastOne({ request });\n\n      const cache = yield _this2.getCache();\n      return yield cache.match(request, _this2.matchOptions);\n    })();\n  }\n\n  /**\n   * Wraps `fetch()`, and calls any `fetchDidFail` callbacks from the\n   * registered behaviors if the request fails.\n   *\n   * @param {Object} input\n   * @param {Request|string} input.request The request or URL to be fetched.\n   * @return {Promise.<Response>} The network response.\n   */\n  fetch({ request }) {\n    var _this3 = this;\n\n    return asyncToGenerator(function* () {\n      assert.atLeastOne({ request });\n\n      return yield fetch(request, _this3.fetchOptions).catch(function (error) {\n        if (_this3.callbacks.fetchDidFail) {\n          for (let callback of _this3.callbacks.fetchDidFail) {\n            callback({ request });\n          }\n        }\n\n        throw error;\n      });\n    })();\n  }\n\n  /**\n   * Combines both fetching and caching, using the previously configured options\n   * and calling the appropriate behaviors.\n   *\n   * By default, responses with a status of [2xx](https://fetch.spec.whatwg.org/#ok-status)\n   * will be considered valid and cacheable, but this could be overridden by\n   * configuring one or more behaviors that implement the `cacheWillUpdate`\n   * lifecycle callback.\n   *\n   * @param {Object} input\n   * @param {Request} input.request\n   * @return {Promise.<Response>} The network response.\n   */\n  fetchAndCache({ request }) {\n    var _this4 = this;\n\n    return asyncToGenerator(function* () {\n      assert.atLeastOne({ request });\n\n      const response = yield _this4.fetch({ request });\n\n      // .ok is true if the response status is 2xx. That's the default condition.\n      let cacheable = response.ok;\n      // If we have any cacheWillUpdate callbacks defined...\n      if (_this4.callbacks.cacheWillUpdate) {\n        // ...run throuh the callbacks one at a time, using reduce() to keep track\n        // of the previous result. We explicitly use reduce() here rather than\n        // some() since we want to make sure to run all of the callbacks, even\n        // if we already have a true result from one.\n        // This allows cacheWillUpdate callbacks to have side effects other, than\n        // just returning true or false.\n        cacheable = _this4.callbacks.cacheWillUpdate.reduce(function (previous, cb) {\n          return cb({ newResponse: response }) || previous;\n        }, false);\n      }\n\n      if (cacheable) {\n        const newResponse = response.clone();\n\n        // Run the cache update sequence asynchronously, without blocking the\n        // response from getting to the client.\n        _this4.getCache().then((() => {\n          var _ref = asyncToGenerator(function* (cache) {\n            let oldResponse;\n\n            // Only bother getting the old response if the new response isn't opaque\n            // and there's at least one cacheDidUpdateCallbacks. Otherwise, we don't\n            // need it.\n            if (response.type !== 'opaque' && _this4.callbacks.cacheDidUpdate) {\n              oldResponse = yield _this4.match({ request });\n            }\n\n            // Regardless of whether or not we'll end up invoking\n            // cacheDidUpdateCallbacks, wait until the cache is updated.\n            yield cache.put(request, newResponse);\n\n            for (let callback of _this4.callbacks.cacheDidUpdate || []) {\n              callback({ cacheName: _this4.cacheName, oldResponse, newResponse });\n            }\n          });\n\n          return function (_x) {\n            return _ref.apply(this, arguments);\n          };\n        })());\n      }\n\n      // Return a response right away, so that the client could make use of it,\n      // without waiting for the cache update sequence to complete.\n      return response;\n    })();\n  }\n}\n\n/*\n Copyright 2016 Google Inc. All Rights Reserved.\n Licensed under the Apache License, Version 2.0 (the \"License\");\n you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n\n     http://www.apache.org/licenses/LICENSE-2.0\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an \"AS IS\" BASIS,\n WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n See the License for the specific language governing permissions and\n limitations under the License.\n*/\n\n/**\n * This a base class meant to be extended by other classes that implement\n * specific request strategies.\n *\n * @memberof module:sw-runtime-caching\n */\nclass Handler {\n  /**\n   * @param {Object} input\n   * @param {RequestWrapper} [input.requestWrapper] An optional `RequestWrapper`\n   *        that is used to configure the cache name and request behaviors. If\n   *        not provided, a new `RequestWrapper` using the\n   *        [default cache name](#defaultCacheName) will be used.\n   */\n  constructor({ requestWrapper } = {}) {\n    if (requestWrapper) {\n      this.requestWrapper = requestWrapper;\n    } else {\n      this.requestWrapper = new RequestWrapper();\n    }\n  }\n\n  /**\n   * An abstract method that each subclass must implement.\n   *\n   * @abstract\n   * @param {Object} input\n   * @param {FetchEvent} input.event The event that triggered the service\n   *        worker's fetch handler.\n   * @param {Object} [input.params] Additional parameters that might be passed\n   *        in to the method. If used in conjunction with the `Route` class,\n   *        then the return value from the `match` function in `Route` will\n   *        be passed in via this parameter.\n   * @return {Promise.<Response>} A response, obtained from whichever strategy\n   *         is implemented.\n   */\n  handle({ event, params } = {}) {\n    throw Error('This abstract method must be implemented in a subclass.');\n  }\n}\n\n/*\n Copyright 2016 Google Inc. All Rights Reserved.\n Licensed under the Apache License, Version 2.0 (the \"License\");\n you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n\n     http://www.apache.org/licenses/LICENSE-2.0\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an \"AS IS\" BASIS,\n WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n See the License for the specific language governing permissions and\n limitations under the License.\n*/\n\n/**\n * @memberof module:sw-runtime-caching\n * @extends module:sw-runtime-caching.Handler\n */\nclass CacheFirst extends Handler {\n  /**\n   * An implementation of a [cache-first](https://developers.google.com/web/fundamentals/instant-and-offline/offline-cookbook/#cache-falling-back-to-network)\n   * request strategy.\n   *\n   * @alias CacheFirst.handle\n   * @param {Object} input\n   * @param {FetchEvent} input.event The event that triggered the service\n   *        worker's fetch handler.\n   * @return {Promise.<Response>} The response, either from the cache,\n   *          or if that isn't available, from the network.\n   */\n  handle({ event } = {}) {\n    var _this = this;\n\n    return asyncToGenerator(function* () {\n      assert.isInstance({ event }, FetchEvent);\n\n      const cachedResponse = yield _this.requestWrapper.match({\n        request: event.request\n      });\n\n      return cachedResponse || (yield _this.requestWrapper.fetchAndCache({\n        request: event.request\n      }));\n    })();\n  }\n}\n\n/*\n Copyright 2016 Google Inc. All Rights Reserved.\n Licensed under the Apache License, Version 2.0 (the \"License\");\n you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n\n     http://www.apache.org/licenses/LICENSE-2.0\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an \"AS IS\" BASIS,\n WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n See the License for the specific language governing permissions and\n limitations under the License.\n*/\n\n/**\n * @memberof module:sw-runtime-caching\n * @extends module:sw-runtime-caching.Handler\n */\nclass CacheOnly extends Handler {\n  /**\n   * An implementation of a [cache-only](https://developers.google.com/web/fundamentals/instant-and-offline/offline-cookbook/#cache-only)\n   * request strategy.\n   *\n   * The advantage to using this vs. directly calling `caches.match()` is that\n   * it will use the cache configuration and trigger the behaviors defined in\n   * the underlying `RequestWrapper`.\n   *\n   * @alias CacheOnly.handle\n   * @param {Object} input An object wrapper for the underlying parameters.\n   * @param {FetchEvent} input.event The event that triggered the service\n   *        worker's fetch handler.\n   * @return {Promise.<Response>} The response from the cache.\n   */\n  handle({ event } = {}) {\n    var _this = this;\n\n    return asyncToGenerator(function* () {\n      assert.isInstance({ event }, FetchEvent);\n\n      return yield _this.requestWrapper.match({ request: event.request });\n    })();\n  }\n}\n\n/*\n Copyright 2016 Google Inc. All Rights Reserved.\n Licensed under the Apache License, Version 2.0 (the \"License\");\n you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n\n     http://www.apache.org/licenses/LICENSE-2.0\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an \"AS IS\" BASIS,\n WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n See the License for the specific language governing permissions and\n limitations under the License.\n*/\n\n/**\n * @memberof module:sw-runtime-caching\n * @extends module:sw-runtime-caching.Handler\n */\nclass NetworkFirst extends Handler {\n  /**\n   * An implementation of a [network first](https://developers.google.com/web/fundamentals/instant-and-offline/offline-cookbook/#network-falling-back-to-cache)\n   * request strategy.\n   *\n   * @alias NetworkFirst.handle\n   * @param {Object} input An object wrapper for the underlying parameters.\n   * @param {FetchEvent} input.event The event that triggered the service\n   *        worker's fetch handler.\n   * @return {Promise.<Response>} The response from the network, or if that's\n   *          not available, a previously cached response.\n   */\n  handle({ event } = {}) {\n    var _this = this;\n\n    return asyncToGenerator(function* () {\n      assert.isInstance({ event }, FetchEvent);\n\n      let response;\n      try {\n        response = yield _this.requestWrapper.fetchAndCache({\n          request: event.request\n        });\n        if (response) {\n          return response;\n        }\n      } catch (error) {\n        // no-op\n      }\n\n      return yield _this.requestWrapper.match({ request: event.request });\n    })();\n  }\n}\n\n/*\n Copyright 2016 Google Inc. All Rights Reserved.\n Licensed under the Apache License, Version 2.0 (the \"License\");\n you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n\n     http://www.apache.org/licenses/LICENSE-2.0\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an \"AS IS\" BASIS,\n WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n See the License for the specific language governing permissions and\n limitations under the License.\n*/\n\n/**\n * @memberof module:sw-runtime-caching\n * @extends module:sw-runtime-caching.Handler\n */\nclass NetworkOnly extends Handler {\n  /**\n   * An implementation of a [network-only](https://developers.google.com/web/fundamentals/instant-and-offline/offline-cookbook/#network-only)\n   * request strategy.\n   *\n   * The advantage to using this vs. directly calling `fetch()` is that it will\n   * trigger the behaviors defined in the underlying `RequestWrapper`.\n   *\n   * @alias NetworkOnly.handle\n   * @param {Object} input An object wrapper for the underlying parameters.\n   * @param {FetchEvent} input.event The event that triggered the service\n   *        worker's fetch handler.\n   * @return {Promise.<Response>} The response from the network.\n   */\n  handle({ event } = {}) {\n    var _this = this;\n\n    return asyncToGenerator(function* () {\n      assert.isInstance({ event }, FetchEvent);\n\n      return yield _this.requestWrapper.fetch({ request: event.request });\n    })();\n  }\n}\n\n/*\n Copyright 2016 Google Inc. All Rights Reserved.\n Licensed under the Apache License, Version 2.0 (the \"License\");\n you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n\n     http://www.apache.org/licenses/LICENSE-2.0\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an \"AS IS\" BASIS,\n WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n See the License for the specific language governing permissions and\n limitations under the License.\n*/\n\n/**\n * @memberof module:sw-runtime-caching\n * @extends module:sw-runtime-caching.Handler\n */\nclass StaleWhileRevalidate extends Handler {\n  /**\n   * An implementation of a [stale-while-revalidate](https://developers.google.com/web/fundamentals/instant-and-offline/offline-cookbook/#stale-while-revalidate)\n   * request strategy.\n   *\n   * In addition to updating the appropriate caches, if will also trigger any\n   * appropriate behaviors defined in the underlying `RequestWrapper`.\n   *\n   * @alias StaleWhileRevalidate.handle\n   * @param {Object} input An object wrapper for the underlying parameters.\n   * @param {FetchEvent} input.event The event that triggered the service\n   *        worker's fetch handler.\n   * @return {Promise.<Response>} The response from the cache, if present, or\n   *          from the network if not.\n   */\n  handle({ event } = {}) {\n    var _this = this;\n\n    return asyncToGenerator(function* () {\n      assert.isInstance({ event }, FetchEvent);\n\n      const fetchAndCacheResponse = _this.requestWrapper.fetchAndCache({\n        request: event.request\n      }).catch(function () {\n        return Response.error();\n      });\n      const cachedResponse = yield _this.requestWrapper.match({\n        request: event.request\n      });\n\n      return cachedResponse || (yield fetchAndCacheResponse);\n    })();\n  }\n}\n\n/*\n Copyright 2016 Google Inc. All Rights Reserved.\n Licensed under the Apache License, Version 2.0 (the \"License\");\n you may not use this file except in compliance with the License.\n You may obtain a copy of the License at\n\n     http://www.apache.org/licenses/LICENSE-2.0\n\n Unless required by applicable law or agreed to in writing, software\n distributed under the License is distributed on an \"AS IS\" BASIS,\n WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n See the License for the specific language governing permissions and\n limitations under the License.\n*/\n\n/**\n * sw-runtime-caching Module\n *\n * @module sw-runtime-caching\n */\n\nexport { CacheFirst, CacheOnly, Handler, NetworkFirst, NetworkOnly, RequestWrapper, StaleWhileRevalidate, defaultCacheName };\n"],"sourceRoot":"/source/"}